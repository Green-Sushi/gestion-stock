<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#088F8F">
    <title>Gestion de Stock - Green Sushi (Version Light)</title>
    <style>
        /* Styles basiques */
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; }
        body { background-color: #f5f5f5; color: #333; }
        
        /* Header */
        header { background-color: #088F8F; color: white; padding: 15px; text-align: center; position: fixed; top: 0; left: 0; right: 0; z-index: 100; }
        
        /* Conteneur principal */
        .container { margin-top: 70px; margin-bottom: 70px; padding: 15px; }
        
        /* Cartes et √©l√©ments */
        .grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-top: 20px; }
        .card { background-color: white; border-radius: 10px; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); text-align: center; }
        .icon { font-size: 2rem; margin-bottom: 10px; }
        
        /* Item de produit */
        .item { background-color: white; border-radius: 10px; padding: 15px; margin-bottom: 10px; display: flex; justify-content: space-between; align-items: center; }
        .item-name { font-weight: bold; }
        .item-supplier { font-size: 0.8rem; color: #777; }
        .low-stock { color: #e74c3c; font-weight: bold; }
        
        /* Navigation */
        nav { background-color: white; display: flex; justify-content: space-around; position: fixed; bottom: 0; left: 0; right: 0; box-shadow: 0 -2px 5px rgba(0,0,0,0.1); }
        .tab { padding: 10px; text-align: center; flex: 1; }
        .active { color: #088F8F; border-top: 2px solid #088F8F; }
        
        /* Boutons */
        button { background: none; border: none; cursor: pointer; }
        .add-button { background-color: #088F8F; color: white; width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; position: fixed; bottom: 80px; right: 20px; font-size: 1.5rem; }
        
        /* Notifications */
        .notification { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); background-color: #088F8F; color: white; padding: 10px 20px; border-radius: 5px; text-align: center; display: none; }
    </style>
</head>
<body>
    <header>
        <h1>Gestion de Stock - Green Sushi</h1>
    </header>
    
    <div class="container" id="content">
        <!-- Contenu dynamique -->
        <div class="grid" id="categories">
            <div class="card" onclick="showCategory('sec')">
                <div class="icon">üåæ</div>
                <div>Stock Sec</div>
            </div>
            <div class="card" onclick="showCategory('frais')">
                <div class="icon">üßÄ</div>
                <div>Stock Frais</div>
            </div>
            <div class="card" onclick="showCategory('surgele')">
                <div class="icon">‚ùÑÔ∏è</div>
                <div>Stock Surgel√©</div>
            </div>
            <div class="card" onclick="showCategory('boissons')">
                <div class="icon">üßÉ</div>
                <div>Stock Boissons</div>
            </div>
            <div class="card" onclick="showCategory('consommable')">
                <div class="icon">ü•¢</div>
                <div>Stock Consommable</div>
            </div>
            <div class="card" onclick="showOrders()">
                <div class="icon">üìã</div>
                <div>Liste Commandes</div>
            </div>
        </div>
        
        <!-- Alertes -->
        <h2 style="margin-top: 30px; margin-bottom: 15px;">Produits en alerte</h2>
        <div id="alerts">
            <!-- Rempli par JavaScript -->
        </div>
    </div>
    
    <nav>
        <div class="tab active" onclick="showHome()">üè†<br>Accueil</div>
        <div class="tab" onclick="showAlerts()">üîî<br>Alertes</div>
        <div class="tab" onclick="showOrders()">üìã<br>Commandes</div>
        <div class="tab" onclick="showStats()">üìä<br>Stats</div>
    </nav>
    
    <div class="notification" id="notification">Notification</div>
    
    <script>
        // Donn√©es de base
        const data = {
            'Stock Sec': [
                {name: "Riz", quantity: 10, unit: "kg", supplier: "M√©tro", alert: 5},
                {name: "Farine", quantity: 8, unit: "kg", supplier: "Promocash", alert: 3},
                {name: "Huile d'olive", quantity: 2, unit: "L", supplier: "M√©tro", alert: 3},
                {name: "Sel", quantity: 4, unit: "kg", supplier: "Promocash", alert: 2}
            ],
            'Stock Frais': [
                {name: "Fromage", quantity: 5, unit: "kg", supplier: "Fromager Local", alert: 3},
                {name: "Cr√®me fra√Æche", quantity: 7, unit: "L", supplier: "M√©tro", alert: 4},
                {name: "Beurre", quantity: 2, unit: "kg", supplier: "M√©tro", alert: 4}
            ],
            'Stock Surgel√©': [
                {name: "Fruits de mer", quantity: 3, unit: "kg", supplier: "Poissonnerie Maritime", alert: 5},
                {name: "Frites", quantity: 8, unit: "kg", supplier: "Promocash", alert: 4}
            ],
            'Stock Boissons': [
                {name: "Vin rouge", quantity: 15, unit: "bouteilles", supplier: "Caviste", alert: 5},
                {name: "Coca-Cola", quantity: 6, unit: "packs", supplier: "Distriboissons", alert: 10}
            ],
            'Stock Consommable': [
                {name: "Serviettes", quantity: 3, unit: "paquets", supplier: "Fournitures Pro", alert: 5},
                {name: "Film alimentaire", quantity: 4, unit: "rouleaux", supplier: "M√©tro", alert: 2}
            ]
        };
        
        const orders = {};
        
        // Affichage de la page d'accueil
        function showHome() {
            document.getElementById('content').innerHTML = `
                <div class="grid" id="categories">
                    <div class="card" onclick="showCategory('sec')">
                        <div class="icon">üåæ</div>
                        <div>Stock Sec</div>
                    </div>
                    <div class="card" onclick="showCategory('frais')">
                        <div class="icon">üßÄ</div>
                        <div>Stock Frais</div>
                    </div>
                    <div class="card" onclick="showCategory('surgele')">
                        <div class="icon">‚ùÑÔ∏è</div>
                        <div>Stock Surgel√©</div>
                    </div>
                    <div class="card" onclick="showCategory('boissons')">
                        <div class="icon">üßÉ</div>
                        <div>Stock Boissons</div>
                    </div>
                    <div class="card" onclick="showCategory('consommable')">
                        <div class="icon">ü•¢</div>
                        <div>Stock Consommable</div>
                    </div>
                    <div class="card" onclick="showOrders()">
                        <div class="icon">üìã</div>
                        <div>Liste Commandes</div>
                    </div>
                </div>
                
                <h2 style="margin-top: 30px; margin-bottom: 15px;">Produits en alerte</h2>
                <div id="alerts"></div>
            `;
            updateAlerts();
            setActiveTab(0);
        }
        
        // Afficher une cat√©gorie
        function showCategory(category) {
            const categoryTitle = 
                category === 'sec' ? 'Stock Sec' : 
                category === 'frais' ? 'Stock Frais' : 
                category === 'surgele' ? 'Stock Surgel√©' : 
                category === 'boissons' ? 'Stock Boissons' : 
                'Stock Consommable';
                
            let html = `
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <button onclick="showHome()" style="font-size: 1.2rem; color: #088F8F; margin-right: 10px;">‚Üê</button>
                    <h2>${categoryTitle}</h2>
                </div>
                <div id="products">`;
                
            if (data[categoryTitle] && data[categoryTitle].length > 0) {
                data[categoryTitle].forEach(product => {
                    const isLowStock = product.quantity <= product.alert;
                    html += `
                        <div class="item">
                            <div>
                                <div class="item-name">${product.name}</div>
                                <div class="item-supplier">${product.supplier}</div>
                            </div>
                            <div style="min-width: 80px; text-align: right;" class="${isLowStock ? 'low-stock' : ''}">
                                ${product.quantity} ${product.unit}
                            </div>
                            <button onclick="toggleOrder('${categoryTitle}', '${product.name}')">üìã</button>
                        </div>
                    `;
                });
            } else {
                html += `<div style="text-align: center; padding: 30px; color: #777;">Aucun produit dans cette cat√©gorie</div>`;
            }
            
            html += `</div>`;
            
            document.getElementById('content').innerHTML = html;
        }
        
        // Afficher les alertes
        function showAlerts() {
            let alertsHtml = `<h2>Alertes Stock Bas</h2><div id="alerts-list">`;
            
            // Collecter toutes les alertes
            let hasAlerts = false;
            for (const category in data) {
                data[category].forEach(product => {
                    if (product.quantity <= product.alert) {
                        hasAlerts = true;
                        alertsHtml += `
                            <div class="item">
                                <div>
                                    <div class="item-name">${product.name}</div>
                                    <div class="item-supplier">${category} - ${product.supplier}</div>
                                </div>
                                <div style="min-width: 80px; text-align: right;" class="low-stock">
                                    ${product.quantity} ${product.unit}
                                </div>
                                <button onclick="toggleOrder('${category}', '${product.name}')">üìã</button>
                            </div>
                        `;
                    }
                });
            }
            
            if (!hasAlerts) {
                alertsHtml += `<div style="text-align: center; padding: 30px; color: #777;">Aucune alerte de stock bas</div>`;
            }
            
            alertsHtml += `</div>`;
            document.getElementById('content').innerHTML = alertsHtml;
            setActiveTab(1);
        }
        
        // Afficher les commandes
        function showOrders() {
            let ordersHtml = `<h2>Liste de Commandes</h2><div id="orders-list">`;
            
            const categories = Object.keys(orders);
            if (categories.length === 0) {
                ordersHtml += `<div style="text-align: center; padding: 30px; color: #777;">Aucune commande en cours</div>`;
            } else {
                categories.forEach(category => {
                    const categoryIcon = 
                        category === 'Stock Sec' ? 'üåæ' : 
                        category === 'Stock Frais' ? 'üßÄ' : 
                        category === 'Stock Surgel√©' ? '‚ùÑÔ∏è' : 
                        category === 'Stock Boissons' ? 'üßÉ' : 'ü•¢';
                        
                    ordersHtml += `
                        <div style="margin-bottom: 15px;">
                            <div style="background-color: #f9f9f9; padding: 10px; border-radius: 5px; margin-bottom: 5px;">
                                ${categoryIcon} ${category} (${orders[category].length})
                            </div>
                    `;
                    
                    orders[category].forEach(product => {
                        ordersHtml += `
                            <div class="item" style="margin-left: 20px;">
                                <div>
                                    <div class="item-name">${product.name}</div>
                                    <div class="item-supplier">${product.supplier}</div>
                                </div>
                                <div style="min-width: 80px; text-align: right;">
                                    ${product.quantity} ${product.unit}
                                </div>
                                <button onclick="removeOrder('${category}', '${product.name}')">‚ùå</button>
                            </div>
                        `;
                    });
                    
                    ordersHtml += `</div>`;
                });
            }
            
            ordersHtml += `</div>`;
            document.getElementById('content').innerHTML = ordersHtml;
            setActiveTab(2);
        }
        
        // Afficher les statistiques
        function showStats() {
            let statsHtml = `
                <h2>Statistiques</h2>
                <div style="text-align: center; padding: 30px; color: #777;">Fonctionnalit√© statistiques en d√©veloppement</div>
                <div style="margin-top: 20px;">
                    <div style="font-weight: bold; margin-bottom: 15px; text-align: center;">Aper√ßu des stocks par cat√©gorie</div>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
            `;
            
            for (const category in data) {
                const categoryIcon = 
                    category === 'Stock Sec' ? 'üåæ' : 
                    category === 'Stock Frais' ? 'üßÄ' : 
                    category === 'Stock Surgel√©' ? '‚ùÑÔ∏è' : 
                    category === 'Stock Boissons' ? 'üßÉ' : 'ü•¢';
                    
                statsHtml += `
                    <div style="display: flex; justify-content: space-between; padding: 10px; background-color: white; border-radius: 5px;">
                        <div>${categoryIcon} ${category}</div>
                        <div>${data[category].length} produits</div>
                    </div>
                `;
            }
            
            statsHtml += `</div></div>`;
            document.getElementById('content').innerHTML = statsHtml;
            setActiveTab(3);
        }
        
        // Ajouter/Retirer un produit de la commande
        function toggleOrder(category, productName) {
            // V√©rifier si la cat√©gorie existe dans les commandes
            if (!orders[category]) {
                orders[category] = [];
            }
            
            // V√©rifier si le produit est d√©j√† dans la commande
            const index = orders[category].findIndex(p => p.name === productName);
            
            if (index === -1) {
                // Trouver le produit dans les donn√©es
                const product = data[category].find(p => p.name === productName);
                if (product) {
                    // Ajouter √† la commande
                    orders[category].push({...product});
                    showNotification(`${productName} ajout√© √† la commande`);
                }
            } else {
                // Retirer de la commande
                orders[category].splice(index, 1);
                
                // Supprimer la cat√©gorie si vide
                if (orders[category].length === 0) {
                    delete orders[category];
                }
                
                showNotification(`${productName} retir√© de la commande`);
            }
            
            // Mettre √† jour l'affichage si on est sur la page des commandes
            if (document.querySelector('.tab.active').textContent.includes('Commandes')) {
                showOrders();
            }
        }
        
        // Supprimer une commande
        function removeOrder(category, productName) {
            if (orders[category]) {
                const index = orders[category].findIndex(p => p.name === productName);
                if (index !== -1) {
                    orders[category].splice(index, 1);
                    
                    // Supprimer la cat√©gorie si vide
                    if (orders[category].length === 0) {
                        delete orders[category];
                    }
                    
                    showNotification(`${productName} retir√© de la commande`);
                    showOrders(); // Rafra√Æchir l'affichage
                }
            }
        }
        
        // Afficher les alertes sur la page d'accueil
        function updateAlerts() {
            const alertsContainer = document.getElementById('alerts');
            if (!alertsContainer) return;
            
            let alertsHtml = '';
            let hasAlerts = false;
            
            for (const category in data) {
                data[category].forEach(product => {
                    if (product.quantity <= product.alert) {
                        hasAlerts = true;
                        alertsHtml += `
                            <div class="item">
                                <div>
                                    <div class="item-name">${product.name}</div>
                                    <div class="item-supplier">${category} - ${product.supplier}</div>
                                </div>
                                <div style="min-width: 80px; text-align: right;" class="low-stock">
                                    ${product.quantity} ${product.unit}
                                </div>
                                <button onclick="toggleOrder('${category}', '${product.name}')">üìã</button>
                            </div>
                        `;
                    }
                });
            }
            
            if (!hasAlerts) {
                alertsHtml = `<div style="text-align: center; padding: 30px; color: #777;">Aucune alerte de stock bas</div>`;
            }
            
            alertsContainer.innerHTML = alertsHtml;
        }
        
        // D√©finir l'onglet actif
        function setActiveTab(index) {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach((tab, i) => {
                if (i === index) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
        }
        
        // Afficher une notification
        function showNotification(message, duration = 2000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, duration);
        }
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            showHome();
        });
    </script>
</body>
</html>
